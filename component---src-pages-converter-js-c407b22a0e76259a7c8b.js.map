{"version":3,"file":"component---src-pages-converter-js-c407b22a0e76259a7c8b.js","mappings":"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","sources":["webpack://dream-machine/./src/pages/converter.js","webpack://dream-machine/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import React, { Component } from 'react';\n// const fs = require(\"fs\");\n\nclass ConverterPage extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            jsonDirHandle: null,\n            mdxSaveDirHandle: null,\n        }\n    }\n\n    chooseMDXSaveDirectory = async () => {\n        const dirHandle = await window.showDirectoryPicker();\n        await this.verifyPermission(dirHandle,true);\n        this.setState({ mdxSaveDirHandle:dirHandle });\n    }\n\n    chooseJSONDirectory = async () => {\n        const dirHandle = await window.showDirectoryPicker();\n        this.setState({ jsonDirHandle: dirHandle });\n    }\n\n    onConvert = async () => {\n        const { jsonDirHandle, mdxSaveDirHandle } = this.state;\n        for await ( const entry of jsonDirHandle.values() ) {\n            if (entry.kind !== 'file') {\n                break;\n            }\n            if ( entry.name.startsWith('.') ) {\n                continue;\n            }\n            const file = await entry.getFile();\n            const text = await file.text();\n            const data = JSON.parse(text);\n            console.log(data);\n\n            const mdx = this.convertToMDX(data);\n            const filename = file.name.replace('.json','.mdx');\n\n            const fileHandle = await this.getSaveHandle(filename, mdxSaveDirHandle);\n            await this.writeFile(fileHandle,mdx);\n        }\n    }\n\n    convertToMDX = data => {\n        let mdx = '---';\n        Object.keys(data).forEach(key => {\n            mdx += `\\n${key}: ${JSON.stringify(data[key])}`;\n        })\n        mdx += '\\n---'\n        return mdx;\n    }\n\n    verifyPermission = async (fileHandle, readWrite) => {\n        const options = {};\n        if (readWrite) {\n          options.mode = 'readwrite';\n        }\n        // Check if permission was already granted. If so, return true.\n        if ((await fileHandle.queryPermission(options)) === 'granted') {\n          return true;\n        }\n        // Request permission. If the user grants permission, return true.\n        if ((await fileHandle.requestPermission(options)) === 'granted') {\n          return true;\n        }\n        // The user didn't grant permission, so return false.\n        return false;\n      }\n\n    getSaveHandle = async (filename, saveHandle) => {\n        if (saveHandle) return saveHandle.getFileHandle(filename, { create:true });\n        const startIn = saveHandle ? saveHandle : 'Documents';\n        const fileHandle = await window.showSaveFilePicker({\n            suggestedName: filename,\n            startIn: startIn,\n          });\n        return fileHandle;\n    }\n\n    writeFile = async (fileHandle, contents) => {\n        const writable = await fileHandle.createWritable();\n        await writable.write(contents);\n        await writable.close();\n    }\n\n    render() {\n        const {\n            jsonDirHandle,\n            mdxSaveDirHandle\n        } = this.state;\n        return(\n            <div>\n                <h1>Converter</h1>\n\n                <button onClick={this.chooseJSONDirectory}>\n                    CHOOSE JSON DIRECTORY\n                </button>\n                <p>{jsonDirHandle && jsonDirHandle.name}</p>\n                <br></br><br></br>\n\n                <button onClick={this.chooseMDXSaveDirectory}>\n                    CHOOSE MDX SAVE DIRECTORY\n                </button>\n                <p>{mdxSaveDirHandle && mdxSaveDirHandle.name}</p>\n                <br></br><br></br>\n\n                <button onClick={this.onConvert}>CONVERT</button>\n\n            </div>\n        )\n    }\n}\n\nexport default ConverterPage;\n\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["ConverterPage","props","chooseMDXSaveDirectory","window","showDirectoryPicker","dirHandle","verifyPermission","setState","mdxSaveDirHandle","chooseJSONDirectory","jsonDirHandle","onConvert","state","values","entry","kind","name","startsWith","getFile","file","text","data","JSON","parse","console","log","mdx","convertToMDX","filename","replace","getSaveHandle","fileHandle","writeFile","Object","keys","forEach","key","stringify","readWrite","options","mode","queryPermission","requestPermission","saveHandle","getFileHandle","create","startIn","showSaveFilePicker","suggestedName","contents","createWritable","writable","write","close","render","this","onClick","Component","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined"],"sourceRoot":""}